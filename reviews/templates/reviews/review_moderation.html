{% extends "base.html" %}
{% load static %}
{% block page_header %}
<div class="container"></div>
{% endblock %}
{% block content %}
<div class="container">
    <div class="row">
        <div class="col text-center mt-3">
            <h2 class="logo-font">Review Approval</h2>
        </div>
    </div>
    <div class="row">
        <div class="col-12 my-2 my-md-5">
            <div class="row gutters-sm">
                <div class="col-12 mb-3">
                    <div class="card h-100">
                        <div class="d-flex mb-3 card-header">
                            <h4 class="mx-auto">Reviews</h4>
                        </div>
                        {% if reviews %}
                        {% for review in reviews.all %}
                        <div class="card-body m-3 p-1 bg-light border rounded border-primary">
                            <h5 class="mb-1">{{ review.developer }} - {{ review.review_header }} - <label
                                    {% if review.review_rating in "1,2,3,4,5" %} style="color: #fddb87" {% endif %}
                                    id="rating-1" class="h4">
                                    <span class="icon">★</span>
                                </label>
                                <label {% if review.review_rating in "2,3,4,5" %} style="color: #fddb87" {% endif %}
                                    id="rating-2" class="h4">
                                    <span class="icon">★</span>
                                </label>
                                <label {% if review.review_rating in "3,4,5" %} style="color: #fddb87" {% endif %}
                                    id="rating-3" class="h4">
                                    <span class="icon">★</span>
                                </label>
                                <label {% if review.review_rating in "4,5" %} style="color: #fddb87" {% endif %}
                                    id="rating-4" class="h4">
                                    <span class="icon">★</span>
                                </label>
                                <label {% if review.review_rating in "5" %} style="color: #fddb87" {% endif %}
                                    id="rating-5" class="h4">
                                    <span class="icon">★</span>
                                </label>
                            </h5>
                            <br>
                            <p>{{ review.review_body }}</p>
                            <p class="text-muted text-right text-capitalize"> - {{ review.reviewer }}, {{ review.review_date }}</p>
                            <form method="POST" id="approve-review_{{ review.id }}"
                                action="{% url 'approve_review' review.id %}" enctype="multipart/form-data"
                                class="d-inline">
                                {% csrf_token %}
                                <a class="btn btn-sm btn-success action_">
                                    <span class="icon">
                                        <i class="far fa-check-circle"></i>
                                    </span>
                                    <span class="font-weight-bold">Approve</span>
                                </a>
                                <button type="submit" class="btn btn-sm btn-outline-success d-none">
                                    <span class="icon">
                                        <i class="far fa-check-circle"></i>
                                    </span>
                                    <span class="font-weight-bold">Confirm</span>
                                </button>
                            </form>
                            <form method="POST" id="reject-review_{{ review.id }}"
                                action="{% url 'reject_review' review.id %}" enctype="multipart/form-data"
                                class="d-inline">
                                {% csrf_token %}
                                <a class="btn btn-sm btn-danger float-right action_">
                                    <span class="icon">
                                        <i class="far fa-times-circle"></i>
                                    </span>
                                    <span class="font-weight-bold">Reject</span>
                                </a>
                                <button type="submit" class="btn btn-sm btn-outline-danger float-right d-none">
                                    <span class="icon">
                                        <i class="far fa-times-circle"></i>
                                    </span>
                                    <span class="font-weight-bold">Confirm</span>
                                </button>
                            </form>
                        </div>
                        {% endfor %}
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
{% block postloadjs %}
{{ block.super }}
<script type="text/javascript">
    $(".action_").click(function () {
        $(this).addClass("d-none");
        $(this).next("button").removeClass("d-none");
    })
</script>
{% endblock %}